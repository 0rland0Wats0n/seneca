<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,900" rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="/assets/css/index.css">

    <title>Seneca</title>
  </head>
  <body class="body__home">
    <nav>
      <div class="nav__inner">
        <div class="nav__list" data-state="closed">
          <a href="/pages/about.html" title="About Us">about us</a>
          <a href="#" title="Programs">programs</a>
          <a href="/pages/trainings.html" title="Trainings">trainings</a>
          <a href="/pages/adopt.html" title="Adopt">adopt</a>
          <a href="/pages/events.html" title="Events">events</a>
          <a href="/pages/donate.html" title="Give Back">give back</a>
          <a href="/pages/contact.html" title="Contact">contact</a>
        </div>
        <span class="nav__toggle" data-state="closed">
          <span></span>
        </span>
      </div>
    </nav>
    <main>
      <span class="logo">
        <img src="/assets/images/seneca-logo.png" alt="Seneca Logo" />
      </span>
      <section>
        <div class="home__section_container pillars__container">
          <div class="home__pillar active" style="background-image: url(assets/images/bitmap@3x.jpg)">
            <div class="home__pillar_content">
              <h5 class="type__spacey type__uppercase type__color_white">we are unconditional</h5>
              <a href="/pages/donate.html" class="button">donate</a>
            </div>
          </div>
          <div class="home__pillar" style="background-image: url(assets/images/bitmapCopy3.jpg)">
            <div class="home__pillar_content">
              <h5 class="type__spacey type__uppercase type__color_white">we are unconditional</h5>
              <a href="/pages/donate.html" class="button">donate</a>
            </div>
          </div>
          <div class="home__pillar" style="background-image: url(assets/images/bitmapCopy2.jpg)">
            <div class="home__pillar_content">
              <h5 class="type__spacey type__uppercase type__color_white">we are unconditional</h5>
              <a href="/pages/donate.html" class="button">donate</a>
            </div>
          </div>
          <div class="home__pillar" style="background-image: url(assets/images/bitmap.png)">
            <div class="home__pillar_content">
              <h5 class="type__spacey type__uppercase type__color_white">we are unconditional</h5>
              <a href="/pages/donate.html" class="button">donate</a>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script src="/assets/js/index.js"></script>
    <script>
      Math.sign = Math.sign || function (x) {
        x = +x;
        if (x === 0 || isNaN(x)) {
          return Number(x);
        }
        return x > 0 ? 1 : -1;
      }
    </script>
    <script>
      (function() {
        var activePillar = document.querySelector(".home__pillar.active");
        
        var handlePillarSwitch = function(direction) {
          var innerWidth = window.innerWidth;
          var inactives = document.querySelectorAll(".home__pillar.inactive");
          var pillarsNodeList = document.querySelectorAll(".home__pillar");
          var pillars = [].slice.call(pillarsNodeList);
          
          activePillar.classList.remove("active");
          activePillar.classList.add("inactive");
          
          if (direction === "goNext") {
            if (!activePillar.nextElementSibling) {
              activePillar = document.querySelector(".home__pillar");
            } else {
              activePillar = activePillar.nextElementSibling;
            }
          } else {
            if (!activePillar.previousElementSibling) {
              activePillar = pillars[3];
            } else {
              activePillar = activePillar.previousElementSibling;
            }
          }

          activePillar.classList.add("active");
          activePillar.classList.remove("inactive");
        }
        
        var x0 = null;
        var switchInterval = setInterval(function() { handlePillarSwitch("goNext"); }, 5000);
        var pillarsContainer = document.querySelector(".pillars__container");

        var unify = function(e) { return e.changedTouches ? e.changedTouches[0] : e };

        var lock = function(e) {
          clearInterval(switchInterval);
          x0 = unify(e).clientX; 
        };

        var switchPillar = function(e) {
          if(x0 || x0 === 0) {
            var s = Math.sign(unify(e).clientX - x0);
            
            if (Math.abs(unify(e).clientX - x0) > 50) {
              if (s < 0) {
                handlePillarSwitch("goNext");
                switchInterval = setInterval(function() { handlePillarSwitch("goNext"); }, 5000);
              } else {
                handlePillarSwitch("goPrevious");
                switchInterval = setInterval(function() { handlePillarSwitch("goPrevious"); }, 5000);
              }
            }
          
            x0 = null
          }
        }

        pillarsContainer.addEventListener("mousedown", lock, false);
        pillarsContainer.addEventListener("touchstart", lock, false);
        pillarsContainer.addEventListener("mouseup", switchPillar, false);
        pillarsContainer.addEventListener("touchend", switchPillar, false);
      })();
    </script>
  </body>
</html>